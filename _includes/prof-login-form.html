<div class="section">
	<div class="logged_out">
		<p>Log in to your account</p>
		<form id="prof_login_form">
			<label for="input_email">Email:</label>
			<input type="text" name="email" id="input_email" size="50"><br>

			<label for="input_password">Password:</label>
			<input type="password" name="password" id="input_password" size="50"><br><br>
			<input type="button" onclick="processLogin()" value="Log in" id="button_login">
		</form>
		<br>
		<p id="login_printer"></p>
	</div>
</div>

<script>
function processLogin() {
	if (profCommands.getIsProcessing()) return;

	let elements = document.getElementById("prof_login_form").elements;
	let email = elements["email"].value;
	let password = elements["password"].value;
	let printer = getHtmlPrinter("login_printer");

	if (!isString(email) || !isString(password)) {
		printer("Invalid data type.");
		return;
	}

	if (isNullOrEmpty(email) || isNullOrEmpty(password)) {
		printer("All fields must be filled out!");
		return;
	}

	let submitButton = $("#button_login");
	submitButton.prop("disabled", true);
	printer("");

	let onComplete = function(msg) {
		submitButton.prop("disabled", false);
		printer(msg);
	}

	profCommands.login(email, password, loginRefresh, onComplete);
}
</script>
